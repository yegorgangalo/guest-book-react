(this["webpackJsonpguest-book-react"]=this["webpackJsonpguest-book-react"]||[]).push([[0],{110:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"fetchComments",(function(){return f})),n.d(c,"addComment",(function(){return p}));var a=n(1),o=n.n(a),r=n(8),s=n.n(r),u=(n(83),n(18)),i=n(22),m=n(10),l=n.n(m),b=n(19),j=n(43),d=n.n(j),O=n(24);d.a.defaults.baseURL="https://guest-book-server.herokuapp.com";var f=Object(O.b)("comments/fetch",function(){var e=Object(b.a)(l.a.mark((function e(t,n){var c,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,d.a.get("/comments");case 4:return a=e.sent,o=a.data,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",c(e.t0.response));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),p=Object(O.b)("comments/add",function(){var e=Object(b.a)(l.a.mark((function e(t,n){var c,a,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,d.a.post("/comments",t);case 4:return a=e.sent,o=a.data,e.abrupt("return",o);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",c(e.t0.response));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),v=function(e){return e.comments.comments},_=function(e){return e.comments.loading},h=function(e){return e.comments.error},x=n(141),C=n(71),k=n(52),g=(n(108),n(49)),N=n.n(g),y=n(44),w=n.n(y),B=n(6),I=function(e){var t=e.name,n=e.comment;return Object(B.jsxs)("li",{className:w.a.commentBlock,children:[Object(B.jsxs)("p",{className:w.a.name,children:[t,":"]}),Object(B.jsx)("p",{className:w.a.comment,children:n})]})},M=function(){var e=Object(i.c)(v);return Object(B.jsx)("ul",{className:N.a.commentList,children:e.length>0?e.map((function(e){var t=e._id,n=e.name,c=e.comment;return Object(B.jsx)(I,{name:n,comment:c},t)})):Object(B.jsx)("li",{className:N.a.noComments,children:"No Comments"})})},S=n(50),L=n.n(S);var E=function(e){var t=e.toggleModal,n=e.children,c=Object(a.useCallback)((function(e){"Escape"===e.code&&t()}),[t]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",c),function(){return window.removeEventListener("keydown",c)}}),[c]),Object(r.createPortal)(Object(B.jsx)("div",{className:L.a.backdrop,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(B.jsx)("div",{className:L.a.content,children:n})}),document.querySelector("#modal-root"))},F=n(15),V=n(140),Y=n(45),A=n(39),P=n.n(A);function T(e){var t=e.toggleModal,n=Object(i.b)(),c=Object(Y.b)(),o=c.handleSubmit,r=c.reset,s=c.control,m=Object(a.useState)(""),l=Object(u.a)(m,2),b=l[0],j=l[1];Object(a.useEffect)((function(){var e=localStorage.getItem("name");e&&j(e)}),[]);var d=function(e){var t=e.target;j(t.value)};return Object(B.jsxs)("form",{className:P.a.blockForm,autoComplete:"on",onSubmit:o((function(e){localStorage.setItem("name",b);var c=Object(F.a)(Object(F.a)({},e),{},{name:b});n(p(c)),t(),r()})),children:[Object(B.jsx)(Y.a,{name:"name",control:s,defaultValue:"",render:function(e){var t=e.field;return Object(B.jsx)(V.a,Object(F.a)(Object(F.a)({},t),{},{value:b,onChange:d,rowsMax:1,label:"Your Name",placeholder:"Antonio",multiline:!0,variant:"outlined",className:P.a.name,autoFocus:!0}))}}),Object(B.jsx)(Y.a,{name:"comment",control:s,defaultValue:"",render:function(e){var t=e.field;return Object(B.jsx)(V.a,Object(F.a)(Object(F.a)({},t),{},{rows:5,rowsMax:10,label:"Your comment",placeholder:"I like your service very much!",multiline:!0,variant:"outlined",className:P.a.comment}))}}),Object(B.jsx)(x.a,{type:"submit",color:"primary",variant:"contained",className:P.a.submitBtn,children:"Add"})]})}var W=n(72),q=n(68),H=n.n(q),J=function(e){var t=e.children,n=e.onClick,c=e.classNames,a=void 0===c?"":c,o=e.type,r=void 0===o?"button":o,s=Object(W.a)(e,["children","onClick","classNames","type"]);return Object(B.jsx)("button",Object(F.a)(Object(F.a)({type:r,className:"".concat(H.a.IconButton," ").concat(a),onClick:n},s),{},{children:t}))};J.defaultProps={onClick:function(){return null},children:null};var U=J,z=n(70),R=n(69),Z=n.n(R);function D(e){var t=e.classNames,n=void 0===t?"":t;return Object(B.jsx)(z.a,{className:"".concat(Z.a.iconSpin," ").concat(n)})}var G=n(51),K=n.n(G);var Q,X=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],o=Object(i.b)(),r=Object(i.c)(_),s=Object(i.c)(h);Object(a.useEffect)((function(){o(f())}),[o]);var m,l=function(){return c(!n)};return Object(B.jsxs)("div",{className:K.a.mainContainer,children:[Object(B.jsx)("h1",{children:"Our visitor's comments"}),Object(B.jsx)(M,{}),r&&Object(B.jsx)(D,{}),s&&(m=s,void Object(k.b)(m)),Object(B.jsx)(x.a,{type:"button",color:"primary",variant:"contained",onClick:l,children:"Leave Comment"}),n&&Object(B.jsxs)(E,{toggleModal:l,children:[Object(B.jsx)(T,{toggleModal:l}),Object(B.jsx)(U,{onClick:l,"aria-label":"Close Modal",classNames:K.a.iconButtonCloseModal,children:Object(B.jsx)(C.a,{})})]}),Object(B.jsx)(k.a,{autoClose:3e3})]})},$=n(16),ee=n(13),te=n(21),ne=f,ce=p,ae=Object(O.c)([],(Q={},Object($.a)(Q,ce.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(ee.a)(e),[n])})),Object($.a)(Q,ne.fulfilled,(function(e,t){return t.payload})),Q)),oe=function(e){return!e},re=Object.values(c).reduce((function(e,t){var n;return Object(F.a)(Object(F.a)({},e),{},(n={},Object($.a)(n,t.fulfilled,oe),Object($.a)(n,t.rejected,oe),Object($.a)(n,t.pending,oe),n))}),{}),se=Object(O.c)(!1,re),ue=function(e,t){var n=t.payload,c=n.status,a=n.config,o=n.request,r=n.statusText;return"Error ".concat(c,". Can't ").concat(a.method," by ").concat(o.responseURL,". ").concat(r)},ie=function(){return null},me=Object.values(c).reduce((function(e,t){var n;return Object(F.a)(Object(F.a)({},e),{},(n={},Object($.a)(n,t.rejected,ue),Object($.a)(n,t.pending,ie),n))}),{}),le=Object(O.c)(null,me),be=Object(te.c)({comments:ae,loading:se,error:le}),je=Object(O.a)({reducer:{comments:be},devTools:!1});s.a.render(Object(B.jsx)(o.a.StrictMode,{children:Object(B.jsx)(i.a,{store:je,children:Object(B.jsx)(X,{})})}),document.getElementById("root"))},39:function(e,t,n){e.exports={name:"Form_name__34-ms",comment:"Form_comment__azIWT",submitBtn:"Form_submitBtn__3Vmc1"}},44:function(e,t,n){e.exports={commentBlock:"CommentItem_commentBlock__3GHYj",name:"CommentItem_name__1YCHw",comment:"CommentItem_comment__1Y7mo"}},49:function(e,t,n){e.exports={commentList:"CommentList_commentList__1JmLH",noComments:"CommentList_noComments__2Iezb"}},50:function(e,t,n){e.exports={backdrop:"Modal_backdrop__3FAPo",content:"Modal_content__1VIbZ"}},51:function(e,t,n){e.exports={mainContainer:"App_mainContainer__2o5r7",iconButtonCloseModal:"App_iconButtonCloseModal__1jvOe"}},68:function(e,t,n){e.exports={IconButton:"IconButton_IconButton__3sU0k"}},69:function(e,t,n){e.exports={iconSpin:"Spinner_iconSpin__DshYl","icon-spin":"Spinner_icon-spin__3WqPZ"}},83:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.deb68ba5.chunk.js.map