(this["webpackJsonpguest-book-react"]=this["webpackJsonpguest-book-react"]||[]).push([[0],{112:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"fetchComments",(function(){return O})),n.d(c,"addComment",(function(){return f})),n.d(c,"deleteComment",(function(){return v})),n.d(c,"patchComment",(function(){return h}));var a=n(1),r=n.n(a),o=n(8),s=n.n(o),u=(n(85),n(15)),i=n(17),l=n(9),m=n.n(l),j=n(19),b=n(36),d=n.n(b),p=n(18);d.a.defaults.baseURL="https://guest-book-server.herokuapp.com";var O=Object(p.c)("comments/fetch",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var c,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,d.a.get("/api/comments");case 4:return a=e.sent,r=a.data,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",c(e.t0.response));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),f=Object(p.c)("comments/add",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var c,a,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,d.a.post("/api/comments",t);case 4:return a=e.sent,r=a.data,e.abrupt("return",r);case 9:return e.prev=9,e.t0=e.catch(1),e.abrupt("return",c(e.t0.response));case 12:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}()),v=Object(p.c)("comments/delete",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,d.a.delete("/api/comments/".concat(t));case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",c(e.t0.response));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),h=Object(p.c)("comments/patch",function(){var e=Object(j.a)(m.a.mark((function e(t,n){var c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=n.rejectWithValue,e.prev=1,e.next=4,d.a.patch("/api/comments/".concat(t._id),t);case 4:return e.abrupt("return",t);case 7:return e.prev=7,e.t0=e.catch(1),e.abrupt("return",c(e.t0.response));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t,n){return e.apply(this,arguments)}}()),_=Object(p.b)("comment/edit"),x=Object(p.b)("comments/resetError"),C=function(e){return e.comments.comments},g=function(e){return e.comments.loading},k=function(e){return e.comments.error},N=function(e){return e.comments.edit},y=n(143),w=n(72),B=n(51),I=(n(110),Object(a.createContext)()),M=n(48),S=n.n(M),E=n(66),L=n(67),F=n(27),V=n(74),W=n(63),Y=n.n(W),A=n(5),P=function(e){var t=e.children,n=e.onClick,c=e.classNames,a=void 0===c?"":c,r=e.type,o=void 0===r?"button":r,s=Object(V.a)(e,["children","onClick","classNames","type"]);return Object(A.jsx)("button",Object(F.a)(Object(F.a)({type:o,className:"".concat(Y.a.IconButton," ").concat(a),onClick:n},s),{},{children:t}))};P.defaultProps={onClick:function(){return null},children:null};var T=P,q=n(65),D=n(64),H=n.n(D);function J(e){var t=e.classNames,n=void 0===t?"":t;return Object(A.jsx)(q.a,{className:"".concat(H.a.iconSpin," ").concat(n)})}var U=n(24),z=n.n(U),R=function(e){var t=e._id,n=e.name,c=e.comment,r=Object(a.useState)(!1),o=Object(u.a)(r,2),s=o[0],l=o[1],m=Object(i.b)(),j=Object(a.useContext)(I).toggleModal,b=Object(i.c)(g),d=Object(i.c)(C);Object(a.useEffect)((function(){l(!1)}),[d]);return Object(A.jsxs)("li",{className:z.a.commentBlock,children:[Object(A.jsxs)("p",{className:z.a.name,children:[n,":"]}),Object(A.jsx)("p",{className:z.a.comment,children:c}),Object(A.jsx)("span",{className:z.a.positionOfBtns,children:b&&s?Object(A.jsx)(T,{"aria-label":"Loading",classNames:z.a.colorBtn,children:Object(A.jsx)(J,{classNames:z.a.spinner})}):Object(A.jsxs)(A.Fragment,{children:[Object(A.jsx)(T,{onClick:function(){j(),m(_({_id:t,name:n,comment:c})),l(!0)},"aria-label":"Edit Contact",classNames:z.a.colorBtn,children:Object(A.jsx)(E.a,{})}),Object(A.jsx)(T,{onClick:function(){m(v(t)),l(!0)},"aria-label":"Delete Contact",classNames:z.a.colorBtn,children:Object(A.jsx)(L.a,{})})]})})]})},Z=function(){var e=Object(i.c)(C);return Object(A.jsx)("ul",{className:S.a.commentList,children:e.length>0?e.map((function(e){var t=e._id,n=e.name,c=e.comment;return Object(A.jsx)(R,{_id:t,name:n,comment:c},t)})):Object(A.jsx)("li",{className:S.a.noComments,children:"No Comments"})})},G=n(49),Q=n.n(G);var K=function(e){var t=e.toggleModal,n=e.children,c=Object(a.useCallback)((function(e){"Escape"===e.code&&t()}),[t]);return Object(a.useEffect)((function(){return window.addEventListener("keydown",c),function(){return window.removeEventListener("keydown",c)}}),[c]),Object(o.createPortal)(Object(A.jsx)("div",{className:Q.a.backdrop,onClick:function(e){e.target===e.currentTarget&&t()},children:Object(A.jsx)("div",{className:Q.a.content,children:n})}),document.querySelector("#modal-root"))},X=n(142),$=n(73),ee=n(41),te=n.n(ee);function ne(e){var t=e.toggleModal,n=Object(i.b)(),c=Object(i.c)(N),r=Object($.a)(),o=r.handleSubmit,s=r.reset,l=Object(a.useState)(""),m=Object(u.a)(l,2),j=m[0],b=m[1],d=Object(a.useState)(""),p=Object(u.a)(d,2),O=p[0],v=p[1];Object(a.useEffect)((function(){if(c)return b(c.name),v(c.comment),function(){n(_(null))};var e=localStorage.getItem("name");e&&b(e)}),[c,n]);return Object(A.jsxs)("form",{className:te.a.blockForm,autoComplete:"on",onSubmit:o((function(){if(localStorage.setItem("name",j),c){var e={_id:c._id,name:j,comment:O};return n(h(e)),t(),void s()}n(f({name:j,comment:O})),t(),s()})),children:[Object(A.jsx)(X.a,{value:j,onChange:function(e){var t=e.target;b(t.value)},rowsMax:1,label:"Your Name",placeholder:"Antonio",multiline:!0,variant:"outlined",className:te.a.name,autoFocus:!0}),Object(A.jsx)(X.a,{value:O,onChange:function(e){var t=e.target;v(t.value)},rows:5,rowsMax:10,label:"Your comment",placeholder:"I like your service very much!",multiline:!0,variant:"outlined",className:te.a.comment}),Object(A.jsx)(y.a,{type:"submit",color:"primary",variant:"contained",className:te.a.submitBtn,children:"Add"})]})}var ce=n(50),ae=n.n(ce);var re,oe,se=function(){var e=Object(a.useState)(!1),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(i.b)(),o=Object(i.c)(g),s=Object(i.c)(k);Object(a.useEffect)((function(){r(O())}),[r]);var l,m=function(){s&&r(x()),c(!n)};return Object(A.jsxs)("div",{className:ae.a.mainContainer,children:[Object(A.jsx)("h1",{children:"Our visitor's comments"}),Object(A.jsx)(I.Provider,{value:{toggleModal:m},children:Object(A.jsx)(Z,{})}),o&&Object(A.jsx)(J,{}),s&&(l=s,void Object(B.b)(l)),Object(A.jsx)(y.a,{type:"button",color:"primary",variant:"contained",onClick:m,children:"Leave Comment"}),n&&Object(A.jsxs)(K,{toggleModal:m,children:[Object(A.jsx)(ne,{toggleModal:m}),Object(A.jsx)(T,{onClick:m,"aria-label":"Close Modal",classNames:ae.a.iconButtonCloseModal,children:Object(A.jsx)(w.a,{})})]}),Object(A.jsx)(B.a,{autoClose:3e3})]})},ue=n(14),ie=n(13),le=n(22),me=O,je=f,be=v,de=h,pe=Object(p.d)(null,(re={},Object(ie.a)(re,_,(function(e,t){return t.payload})),Object(ie.a)(re,de.fulfilled,(function(){return null})),re)),Oe=Object(p.d)([],(oe={},Object(ie.a)(oe,je.fulfilled,(function(e,t){var n=t.payload;return[].concat(Object(ue.a)(e),[n])})),Object(ie.a)(oe,me.fulfilled,(function(e,t){return t.payload})),Object(ie.a)(oe,be.fulfilled,(function(e,t){var n=t.payload;return e.filter((function(e){return e._id!==n}))})),Object(ie.a)(oe,de.fulfilled,(function(e,t){var n=t.payload;return e.map((function(e){return e._id===n._id?n:e}))})),oe)),fe=function(e){return!e},ve=Object.values(c).reduce((function(e,t){var n;return Object(F.a)(Object(F.a)({},e),{},(n={},Object(ie.a)(n,t.fulfilled,fe),Object(ie.a)(n,t.rejected,fe),Object(ie.a)(n,t.pending,fe),n))}),{}),he=Object(p.d)(!1,ve),_e=function(e,t){var n=t.payload,c=n.status,a=n.config,r=n.request,o=n.statusText;return"Error ".concat(c,". Can't ").concat(a.method," by ").concat(r.responseURL,". ").concat(o)},xe=function(){return null},Ce=Object.values(c).reduce((function(e,t){var n;return Object(F.a)(Object(F.a)({},e),{},(n={},Object(ie.a)(n,t.rejected,_e),Object(ie.a)(n,t.pending,xe),n))}),Object(ie.a)({},x,xe));console.log(Ce);var ge=Object(p.d)(null,Ce),ke=Object(le.c)({comments:Oe,loading:he,error:ge,edit:pe}),Ne=Object(p.a)({reducer:{comments:ke},devTools:!1});s.a.render(Object(A.jsx)(r.a.StrictMode,{children:Object(A.jsx)(i.a,{store:Ne,children:Object(A.jsx)(se,{})})}),document.getElementById("root"))},24:function(e,t,n){e.exports={commentBlock:"CommentItem_commentBlock__3GHYj",name:"CommentItem_name__1YCHw",comment:"CommentItem_comment__1Y7mo",positionOfBtns:"CommentItem_positionOfBtns__awu8x",colorBtn:"CommentItem_colorBtn__hIuw1",spinner:"CommentItem_spinner__2EQDd"}},41:function(e,t,n){e.exports={name:"Form_name__34-ms",comment:"Form_comment__azIWT",submitBtn:"Form_submitBtn__3Vmc1"}},48:function(e,t,n){e.exports={commentList:"CommentList_commentList__1JmLH",noComments:"CommentList_noComments__2Iezb"}},49:function(e,t,n){e.exports={backdrop:"Modal_backdrop__3FAPo",content:"Modal_content__1VIbZ"}},50:function(e,t,n){e.exports={mainContainer:"App_mainContainer__2o5r7",iconButtonCloseModal:"App_iconButtonCloseModal__1jvOe"}},63:function(e,t,n){e.exports={IconButton:"IconButton_IconButton__3sU0k"}},64:function(e,t,n){e.exports={iconSpin:"Spinner_iconSpin__DshYl","icon-spin":"Spinner_icon-spin__3WqPZ"}},85:function(e,t,n){}},[[112,1,2]]]);
//# sourceMappingURL=main.a0226528.chunk.js.map